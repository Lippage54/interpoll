<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–¢–µ—Å—Ç—ã</title>
<link href="https://fonts.googleapis.com/css2?family=Comic+Relief&display=swap" rel="stylesheet">
<style>
:root {
    --bg: white;
    --text: #111;
    --accent: #007bff;
    --window-bg: rgba(255,255,255,0.95);
}

body.dark {
    --bg: #121212;
    --text: #f5f5f5;
    --window-bg: rgba(30,30,30,0.95);
}

body {
    margin: 0;
    padding: 0;
    background: var(--bg) url("background.jpg") center/cover no-repeat fixed;
    font-family: Arial, sans-serif;
    color: var(--text);
    transition: background-color 0.6s, color 0.6s;
}

/* –ü–∞–Ω–µ–ª—å –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É */
.corner-controls {
    position: fixed;
    top: 15px;
    right: 15px;
    display: flex;
    gap: 10px;
    z-index: 10;
}

.icon-btn {
    background: var(--window-bg);
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
    cursor: pointer;
    color: var(--text);
    font-size: 18px;
    transition: 0.2s;
}
.icon-btn:hover { transform: scale(1.1); }

.count-popup {
    position: absolute;
    top: 40px;
    right: 0;
    background: var(--window-bg);
    border-radius: 8px;
    padding: 10px 15px;
    box-shadow: 0 0 10px rgba(0,0,0,0.25);
    display: none;
    text-align: center;
}
.count-popup input {
    width: 70px;
    padding: 5px;
    text-align: center;
}

/* –ë–µ–ª–æ–µ –æ–∫–Ω–æ */
.window {
    background: var(--window-bg);
    width: 300px;
    margin: 150px auto 0 auto;
    padding: 25px 30px;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.25);
    position: relative;
    overflow: hidden;
    text-align: center;
}

h1 {
    font-family: 'Comic Relief', cursive;
    font-size: 22px;
    margin-top: 0;
    margin-bottom: 20px;
}

.test-list {
    text-align: left;
    margin-bottom: 20px;
    max-height: 200px;
    overflow-y: auto;
}

.test-btn {
    width: 100%;
    padding: 10px;
    margin-bottom: 8px;
    border: 1px solid #555;
    background: var(--bg);
    border-radius: 6px;
    cursor: pointer;
    text-align: left;
    font-size: 15px;
    transition: 0.2s;
    color: var(--text);
}

.test-btn:hover { background: rgba(0,0,0,0.1); }
.selected { border-color: var(--accent); background: rgba(0,123,255,0.1); }

.start-btn {
    width: 100%;
    padding: 12px;
    background: var(--accent);
    border: none;
    color: white;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 10px;
    transition: 0.3s;
}
.start-btn:hover { background: #005fcc; }

</style>
</head>
<body>

<!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
<div class="corner-controls">
    <button class="icon-btn" onclick="toggleCount()">üî¢</button>
    <button class="icon-btn" onclick="toggleTheme()">üåì</button>

    <div class="count-popup" id="count-popup">
        <label>–í–æ–ø—Ä–æ—Å–æ–≤:<br>
            <input id="count" type="number" min="1" value="25">
        </label>
    </div>
</div>

<!-- –û–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤ -->
<div class="window" id="window">
    <h1>–°–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤</h1>
    <div class="test-list" id="list"></div>
    <button class="start-btn" onclick="go()">–í—ã–±—Ä–∞—Ç—å</button>
</div>

<script>
let selectedId = null;

// –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–æ–≤
fetch('tests.json')
    .then(r => r.json())
    .then(data => {
        const list = document.getElementById('list');

        data.forEach(t => {
            const btn = document.createElement('button');
            btn.className = 'test-btn';
            btn.textContent = t.title;
            btn.onclick = () => {
                [...list.children].forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');
                selectedId = t.id;
            };
            list.appendChild(btn);
        });

        // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤"
        const historyBtn = document.createElement('button');
        historyBtn.className = 'test-btn';
        historyBtn.textContent = "–ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤";
        historyBtn.onclick = () => { window.location.href = 'results.html'; };
        list.appendChild(historyBtn);
    });

function go() {
    if (!selectedId) { alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç."); return; }
    const count = document.getElementById('count').value;
    window.location.href = `test.html?id=${selectedId}&count=${count}`;
}

// –ü—Ä–æ—Å—Ç–∞—è —Å–º–µ–Ω–∞ —Ç–µ–º—ã
function toggleTheme() {
    document.body.classList.toggle('dark');
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
}

// –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –º–µ–Ω—é –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
function toggleCount() {
    const popup = document.getElementById('count-popup');
    popup.style.display = (popup.style.display === 'block') ? 'none' : 'block';
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –Ω–µ–≥–æ
document.addEventListener('click', e => {
    const popup = document.getElementById('count-popup');
    const btn = e.target.closest('.icon-btn');
    if (!btn && !popup.contains(e.target)) popup.style.display = 'none';
});

// —Å—Ä–∞–∑—É –ø—Ä–∏–º–µ–Ω—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é —Ç–µ–º—É
if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');
</script>

</body>
</html>
